{"version":3,"sources":["webpack:///src/app/pages/principal-libreria/principal-libreria.page.html","webpack:///src/app/pages/principal-libreria/principal-libreria-routing.module.ts","webpack:///src/app/pages/principal-libreria/principal-libreria.module.ts","webpack:///src/app/pages/principal-libreria/principal-libreria.page.scss","webpack:///src/app/pages/principal-libreria/principal-libreria.page.ts"],"names":["routes","path","component","PrincipalLibreriaPageRoutingModule","imports","forChild","exports","PrincipalLibreriaPageModule","declarations","PrincipalLibreriaPage","router","_usuarioService","_eventoService","_libroService","alertController","booleanEventos","limitePropio","limiteLibrosPropio","compruebaSiLogado","logado","navigate","getEventos","usuario","usuarioActual","nombre","eventosPropios","event","numeroVariableAntiguoEvento","length","numeroVariableNuevoEvento","target","disabled","numeroVariableAntiguoLibro","librosPropios","getLibros","numeroVariableNuevoLibro","complete","infiniteScroll","cerrarSesion","navigateByUrl","_id","idEventoModificar","evento","eventoIdBorrar","borrar","data","eventoPropio","indexP","indexOf","splice","idLibroModificar","libro","libroIdBorrar","libroPropio","selector","template"],"mappings":"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","file":"pages-principal-libreria-principal-libreria-module-es5.js","sourcesContent":["export default \"  <ion-toolbar class=\\\"toolbar-color\\\">\\r\\n    <ion-avatar [routerLink]=\\\"'/perfil-libreria'\\\" class=\\\"avatar-profile\\\">\\r\\n      <img src=\\\"../../../assets/profile-l.jpg\\\">\\r\\n    </ion-avatar>\\r\\n  </ion-toolbar>\\r\\n\\r\\n<ion-content class=\\\"content\\\">\\r\\n<div class=\\\"options\\\">\\r\\n    <ion-toolbar >\\r\\n      <ion-segment>\\r\\n        <ion-segment-button (click)=\\\"loadEventosPropios()\\\" value=\\\"propio\\\">Eventos</ion-segment-button>\\r\\n        <ion-segment-button (click)=\\\"loadLibrosPropios()\\\" value=\\\"ajeno\\\">Libros</ion-segment-button>\\r\\n      </ion-segment>\\r\\n    </ion-toolbar>\\r\\n    \\r\\n     <!-- Eventos -->\\r\\n      <ion-card *ngFor=\\\"let evento of eventosPropios\\\">\\r\\n        <div class=\\\"imagen\\\">\\r\\n          <img class=\\\"imagenCard\\\" *ngIf=\\\"evento.imagenEvento\\\" src=\\\"{{evento.imagenEvento}}\\\">\\r\\n          <img class=\\\"imagenCard\\\" *ngIf=\\\"!evento.imagenEvento\\\" src=\\\"../../../assets/evento.jpg\\\">\\r\\n        </div>\\r\\n        <ion-card-header color=\\\"light\\\" style=\\\"height: 45px;\\\">\\r\\n          <ion-card-title class=\\\"card-titulo\\\"><h4>{{evento.nombreEvento}}</h4></ion-card-title>\\r\\n        </ion-card-header>\\r\\n        <ion-card-content style=\\\"margin-top: 12px;\\\">\\r\\n          <b>Ciudad: </b>{{evento.ciudad}}<br>\\r\\n          <b>Direccion: </b>{{evento.direccion}}<br>\\r\\n          <b>Fecha: </b>{{evento.fecha | date: 'dd/MM/yyyy'}}<br>\\r\\n          <b>Hora: </b>{{evento.hora | date: 'HH:mm'}}\\r\\n        </ion-card-content>\\r\\n        <ion-item color=\\\"light\\\">\\r\\n          <ion-icon name=\\\"accessibility-outline\\\"></ion-icon>\\r\\n          <span>{{evento.participantes.length}}</span>\\r\\n          <ion-button class=\\\"option\\\" (click)=\\\"editarEvento(evento._id)\\\" fill=\\\"outline\\\" slot=\\\"end\\\" >Editar</ion-button>\\r\\n          <ion-button class=\\\"option\\\" (click)=\\\"borrarEvento(evento._id)\\\" fill=\\\"outline\\\" slot=\\\"end\\\" color=\\\"danger\\\">Borrar</ion-button> \\r\\n        </ion-item>\\r\\n      </ion-card> \\r\\n    </div>\\r\\n\\r\\n    <!-- Libros -->\\r\\n    <ion-card *ngFor=\\\"let libro of librosPropios\\\">\\r\\n      <div class=\\\"imagen\\\">\\r\\n        <img class=\\\"imagenCard\\\" *ngIf=\\\"libro.imagenLibro\\\" src=\\\"{{libro.imagenLibro}}\\\">\\r\\n        <img class=\\\"imagenCard\\\" *ngIf=\\\"!libro.imagenLibro\\\" src=\\\"../../../assets/registro-bibliofilo.jpg\\\">\\r\\n      </div>\\r\\n      <ion-card-header color=\\\"light\\\" style=\\\"height: 45px;\\\">\\r\\n        <ion-card-title class=\\\"card-titulo\\\"><h4>{{libro.nombreLibro}}</h4></ion-card-title>\\r\\n      </ion-card-header>\\r\\n      <ion-card-content style=\\\"margin-top: 12px;\\\">\\r\\n        <b>GÃ©nero: </b>{{libro.genero}}<br>\\r\\n        <b>Autor: </b>{{libro.autor}}<br>\\r\\n        <b>Precio: </b>{{libro.precio}}\\r\\n      </ion-card-content>\\r\\n      <ion-item color=\\\"light\\\">\\r\\n        <ion-button *ngIf=\\\"libro.participantes.length > 0\\\"  class=\\\"reservado\\\" fill=\\\"outline\\\" slot=\\\"end\\\" color=\\\"success\\\">Reservado</ion-button>\\r\\n        <ion-button class=\\\"option\\\" (click)=\\\"editarLibro(libro._id)\\\" fill=\\\"outline\\\" slot=\\\"end\\\" >Editar</ion-button>\\r\\n        <ion-button class=\\\"option\\\" (click)=\\\"borrarLibro(libro._id)\\\" fill=\\\"outline\\\" slot=\\\"end\\\" color=\\\"danger\\\">Borrar</ion-button> \\r\\n      </ion-item>\\r\\n      <ion-item *ngIf=\\\"libro.participantes.length > 0\\\" class=\\\"personaReservaLibro\\\" color=\\\"light\\\">\\r\\n        <div>\\r\\n          <span>{{libro.participantes[0]}}</span><br>\\r\\n        </div>\\r\\n      </ion-item>\\r\\n    </ion-card>\\r\\n    <ion-infinite-scroll threshold=\\\"200px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\r\\n    <ion-infinite-scroll-content\\r\\n      loadingSpinner=\\\"circular\\\"\\r\\n      loadingText=\\\"Cargando...\\\">\\r\\n    </ion-infinite-scroll-content>\\r\\n  </ion-infinite-scroll>\\r\\n</ion-content>\\r\\n  \\r\\n  <ion-footer class=\\\"bar-stable\\\">\\r\\n    <ion-toolbar class=\\\"tool-foot\\\" color=\\\"light\\\">\\r\\n      <div class=\\\"content-button-event\\\">\\r\\n          <ion-button class=\\\"button-event\\\" (click)=\\\"crearEvento()\\\" fill=\\\"solid\\\" slot=\\\"end\\\" color=\\\"success\\\">Crear evento\\r\\n          </ion-button>\\r\\n          <ion-button class=\\\"button-book\\\" (click)=\\\"publicarLibro()\\\" fill=\\\"solid\\\" slot=\\\"end\\\" color=\\\"medium\\\">Publicar libro\\r\\n          </ion-button>\\r\\n    </div>\\r\\n    </ion-toolbar>\\r\\n  </ion-footer>\\r\\n  \";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { PrincipalLibreriaPage } from './principal-libreria.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PrincipalLibreriaPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class PrincipalLibreriaPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { PrincipalLibreriaPageRoutingModule } from './principal-libreria-routing.module';\r\nimport { PrincipalLibreriaPage } from './principal-libreria.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    PrincipalLibreriaPageRoutingModule\r\n  ],\r\n  declarations: [PrincipalLibreriaPage]\r\n})\r\nexport class PrincipalLibreriaPageModule {}\r\n","export default \".content {\\n  overflow-y: hidden;\\n  background-color: white;\\n}\\n\\n.options {\\n  margin-top: 12px;\\n}\\n\\n.avatar-profile {\\n  position: relative;\\n  left: 285px;\\n  margin-top: 6px;\\n  width: 60px;\\n  height: 60px;\\n}\\n\\n.bar-stable {\\n  margin-top: 12px;\\n}\\n\\n.tool-foot {\\n  text-align: center;\\n  margin-top: 10px;\\n}\\n\\n.card-titulo {\\n  color: #3d3df0;\\n  text-align: center;\\n  font-size: 17px;\\n  height: 45px;\\n  margin-top: -24px;\\n}\\n\\n.button-event, .button-book {\\n  width: 122px;\\n  height: 38px;\\n  margin-top: 14px;\\n  margin-bottom: 12px;\\n}\\n\\n.localizacion, .share {\\n  font-size: 17px;\\n}\\n\\n.option {\\n  font-size: 15px;\\n}\\n\\n.reservado {\\n  font-size: 15px;\\n  position: absolute;\\n  left: 0;\\n}\\n\\n.personaReservaLibro {\\n  font-size: 13px;\\n}\\n\\n.imagen {\\n  width: 344px;\\n  height: 205px;\\n}\\n\\n.imagenCard {\\n  width: 100%;\\n  height: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcHJpbmNpcGFsLWxpYnJlcmlhL3ByaW5jaXBhbC1saWJyZXJpYS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxrQkFBQTtFQUNBLHVCQUFBO0FBQ0o7O0FBQ0E7RUFDSSxnQkFBQTtBQUVKOztBQUFBO0VBQ0ksa0JBQUE7RUFDQSxXQUFBO0VBQ0EsZUFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0FBR0o7O0FBREE7RUFDSSxnQkFBQTtBQUlKOztBQUZBO0VBQ0ksa0JBQUE7RUFDQSxnQkFBQTtBQUtKOztBQUZBO0VBQ0ksY0FBQTtFQUNBLGtCQUFBO0VBQ0EsZUFBQTtFQUNBLFlBQUE7RUFDQSxpQkFBQTtBQUtKOztBQUhBO0VBQ0ksWUFBQTtFQUNBLFlBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0FBTUo7O0FBSkE7RUFDSSxlQUFBO0FBT0o7O0FBTEE7RUFDSSxlQUFBO0FBUUo7O0FBTkE7RUFDSSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSxPQUFBO0FBU0o7O0FBUEE7RUFDSSxlQUFBO0FBVUo7O0FBUkE7RUFDSSxZQUFBO0VBQ0EsYUFBQTtBQVdKOztBQVRBO0VBQ0ksV0FBQTtFQUNBLFlBQUE7QUFZSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3ByaW5jaXBhbC1saWJyZXJpYS9wcmluY2lwYWwtbGlicmVyaWEucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRlbnQge1xyXG4gICAgb3ZlcmZsb3cteTpoaWRkZW47XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxufVxyXG4ub3B0aW9ucyB7XHJcbiAgICBtYXJnaW4tdG9wOiAxMnB4O1xyXG59XHJcbi5hdmF0YXItcHJvZmlsZSB7XHJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICBsZWZ0OiAyODVweDtcclxuICAgIG1hcmdpbi10b3A6IDZweDtcclxuICAgIHdpZHRoOiA2MHB4O1xyXG4gICAgaGVpZ2h0OiA2MHB4O1xyXG59XHJcbi5iYXItc3RhYmxlIHtcclxuICAgIG1hcmdpbi10b3A6IDEycHg7XHJcbn1cclxuLnRvb2wtZm9vdCB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7IFxyXG4gICAgbWFyZ2luLXRvcDogMTBweFxyXG5cclxufVxyXG4uY2FyZC10aXR1bG8ge1xyXG4gICAgY29sb3I6IHJnYig2MSwgNjEsIDI0MCk7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBmb250LXNpemU6IDE3cHg7XHJcbiAgICBoZWlnaHQ6IDQ1cHg7IFxyXG4gICAgbWFyZ2luLXRvcDogLTI0cHg7XHJcbn1cclxuLmJ1dHRvbi1ldmVudCwgLmJ1dHRvbi1ib29rIHtcclxuICAgIHdpZHRoOiAxMjJweDtcclxuICAgIGhlaWdodDogMzhweDtcclxuICAgIG1hcmdpbi10b3A6IDE0cHg7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xyXG59XHJcbi5sb2NhbGl6YWNpb24sIC5zaGFyZSB7XHJcbiAgICBmb250LXNpemU6IDE3cHg7XHJcbn1cclxuLm9wdGlvbiB7XHJcbiAgICBmb250LXNpemU6IDE1cHg7XHJcbn1cclxuLnJlc2VydmFkb3tcclxuICAgIGZvbnQtc2l6ZTogMTVweDtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIGxlZnQ6IDA7XHJcbn1cclxuLnBlcnNvbmFSZXNlcnZhTGlicm97XHJcbiAgICBmb250LXNpemU6IDEzcHg7XHJcbn1cclxuLmltYWdlbiB7XHJcbiAgICB3aWR0aDogMzQ0cHg7XHJcbiAgICBoZWlnaHQ6IDIwNXB4O1xyXG59XHJcbi5pbWFnZW5DYXJkIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG59XHJcbiJdfQ== */\";","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router} from '@angular/router';\r\nimport { Evento } from 'src/app/interfaces/evento';\r\nimport { Libro } from 'src/app/interfaces/libro';\r\nimport { UsuarioService } from '../../services/usuario.service';\r\nimport { EventoService } from '../../services/evento.service';\r\nimport { LibroService } from '../../services/libro.service';\r\nimport { AlertController} from '@ionic/angular';\r\nimport { IonInfiniteScroll } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-principal-libreria',\r\n  templateUrl: './principal-libreria.page.html',\r\n  styleUrls: ['./principal-libreria.page.scss'],\r\n})\r\nexport class PrincipalLibreriaPage implements OnInit {\r\n  @ViewChild(IonInfiniteScroll) infiniteScroll: IonInfiniteScroll;\r\n\r\n  public usuario:String;\r\n  public _id:String;\r\n\r\n  //Para saber en que eventos estamos\r\n  booleanEventos : boolean = true;\r\n\r\n  //lista de eventos propios\r\n  eventosPropios : Evento[]; \r\n\r\n  //lista de libros propios\r\n  librosPropios : Libro[]; \r\n\r\n  //limite de eventos propios\r\n  limitePropio : number = 3; \r\n\r\n  //limite de libros propios\r\n  limiteLibrosPropio : number = 3; \r\n\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private _usuarioService:UsuarioService,\r\n    private _eventoService:EventoService, \r\n    private _libroService:LibroService, \r\n    private alertController: AlertController\r\n    ) { }\r\n\r\n  async ngOnInit() {\r\n    \r\n    const logado  = await this._usuarioService.compruebaSiLogado();\r\n    if(!logado){\r\n      this.router.navigate(['/inicio']);\r\n      return;\r\n    }\r\n    //llamar al servicio\r\n    await this._eventoService.getEventos(this.limitePropio);\r\n    this.usuario = this._usuarioService.usuarioActual.nombre;\r\n    this.eventosPropios = this._eventoService.eventosPropios;\r\n  }\r\n  //Infinitte scroll\r\n  async loadData(event){\r\n      //Tenemos una lista de todos los eventos cargados\r\n      //Tenemos una lista que va a ir cargando los eventos poco a poco - esta es la que se usa\r\n      if(this.booleanEventos){\r\n        //Limite de eventos propios\r\n        this.limitePropio = this.limitePropio + 3;\r\n\r\n        //Antes de llamar al servicio coger los eventos que tenemos ahora mismo\r\n        const numeroVariableAntiguoEvento = this.eventosPropios.length;\r\n        \r\n        //Cargar en la lista propia mis eventos\r\n        await this._eventoService.getEventos(this.limitePropio);\r\n\r\n        //Saber los eventos que tenemos nuevos\r\n        const numeroVariableNuevoEvento = this._eventoService.eventosPropios.length;\r\n\r\n        //Carga del servicio la lista de los eventos\r\n        if(numeroVariableAntiguoEvento == numeroVariableNuevoEvento){\r\n          event.target.disabled = true;\r\n        }else{\r\n          this.eventosPropios = this._eventoService.eventosPropios;\r\n        }\r\n\r\n\r\n      }else{\r\n        //Limite de libros propios\r\n        this.limiteLibrosPropio = this.limiteLibrosPropio + 3;\r\n\r\n        //Antes de llamar al servicio coger los libros que tenemos ahora mismo\r\n        const numeroVariableAntiguoLibro = this.librosPropios.length;\r\n        \r\n        //Cargar en la lista de libros propios\r\n        await this._libroService.getLibros(this.limiteLibrosPropio);\r\n\r\n        //Saber los libros que tenemos nuevos\r\n        const numeroVariableNuevoLibro = this._libroService.librosPropios.length;\r\n\r\n        //Carga del servicio la lista de los libros\r\n        if(numeroVariableAntiguoLibro == numeroVariableNuevoLibro){\r\n          event.target.disabled = true;\r\n        }else{\r\n          this.librosPropios = this._libroService.librosPropios;\r\n        }\r\n\r\n      }\r\n\r\n      //Completar la accion de cargar los eventos\r\n      event.target.complete();\r\n\r\n  }\r\n\r\n  async loadEventosPropios(){\r\n\r\n    this.infiniteScroll.disabled = false;\r\n\r\n    this.booleanEventos = true;\r\n    \r\n    //Quitar de la lista contraria los libros \r\n    this.librosPropios = []; \r\n    \r\n    //limite de eventos propios\r\n    this.limitePropio = 3;\r\n    \r\n    //llamar al servicio para llamar al back para recuperar los eventos\r\n    await this._eventoService.getEventos(this.limitePropio);\r\n    \r\n    //Carga del servicio la lista de los eventos\r\n    this.eventosPropios = this._eventoService.eventosPropios;\r\n  }\r\n\r\n  async loadLibrosPropios(){\r\n\r\n    this.infiniteScroll.disabled = false;\r\n\r\n    this.booleanEventos = false;\r\n    //Quitar de la lista contraria los eventos \r\n    this.eventosPropios = []; \r\n\r\n    //limite de libros propios\r\n    this.limiteLibrosPropio = 3;\r\n\r\n    //llamar al servicio para llamar al back para recuperar los libros\r\n    await this._libroService.getLibros(this.limiteLibrosPropio);\r\n    \r\n    //Carga del servicio la lista de los libros\r\n    this.librosPropios = this._libroService.librosPropios;\r\n  }\r\n\r\n  cerrarSesion(){\r\n    this._usuarioService.cerrarSesion();\r\n    this.router.navigateByUrl('/inicio');\r\n  }\r\n  crearEvento(){\r\n    this.router.navigate(['/registrar-evento']);\r\n  }\r\n  \r\n  editarEvento(_id:String){\r\n    this._eventoService.idEventoModificar = _id;\r\n    this.router.navigate(['/modal-demo']);\r\n  }\r\n\r\n  //borrar evento\r\n  async borrarEvento(evento : any){\r\n    this._eventoService.eventoIdBorrar = evento;\r\n    await this. _eventoService.borrar();\r\n\r\n    let eventoPropio: Evento;\r\n    for(let data of this.eventosPropios){\r\n      if(data._id == evento){\r\n        eventoPropio = data;\r\n      }\r\n    }\r\n    let indexP = this.eventosPropios.indexOf(eventoPropio);\r\n    this.eventosPropios.splice(indexP,1);\r\n  }\r\n\r\n  publicarLibro(){\r\n    this.router.navigate(['/registrar-libro']);\r\n  }\r\n  editarLibro(_id:String){\r\n    this._libroService.idLibroModificar = _id;\r\n    this.router.navigate(['/modal-demo-libro']);\r\n      \r\n  }\r\n  async borrarLibro(libro:any){\r\n    this._libroService.libroIdBorrar = libro;\r\n    await this. _libroService.borrar();\r\n\r\n    let libroPropio: Libro;\r\n    for(let data of this.librosPropios){\r\n      if(data._id == libro){\r\n        libroPropio = data;\r\n      }\r\n    }\r\n    let indexP = this.librosPropios.indexOf(libroPropio);\r\n    this.librosPropios.splice(indexP,1);\r\n  }\r\n\r\n}\r\n"]}