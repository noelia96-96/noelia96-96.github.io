{"version":3,"sources":["./src/app/pages/principal-libreria/principal-libreria.page.html","./src/app/pages/principal-libreria/principal-libreria-routing.module.ts","./src/app/pages/principal-libreria/principal-libreria.module.ts","./src/app/pages/principal-libreria/principal-libreria.page.scss","./src/app/pages/principal-libreria/principal-libreria.page.ts"],"names":[],"mappings":"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","file":"pages-principal-libreria-principal-libreria-module-es2015.js","sourcesContent":["export default \"  <ion-toolbar class=\\\"toolbar-color\\\">\\r\\n    <ion-avatar [routerLink]=\\\"'/perfil-libreria'\\\" class=\\\"avatar-profile\\\">\\r\\n      <img src=\\\"../../../assets/profile-l.jpg\\\">\\r\\n    </ion-avatar>\\r\\n  </ion-toolbar>\\r\\n\\r\\n<ion-content class=\\\"content\\\">\\r\\n<div class=\\\"options\\\">\\r\\n    <ion-toolbar >\\r\\n      <ion-segment>\\r\\n        <ion-segment-button (click)=\\\"loadEventosPropios()\\\" value=\\\"propio\\\">Eventos</ion-segment-button>\\r\\n        <ion-segment-button (click)=\\\"loadLibrosPropios()\\\" value=\\\"ajeno\\\">Libros</ion-segment-button>\\r\\n      </ion-segment>\\r\\n    </ion-toolbar>\\r\\n    \\r\\n     <!-- Eventos -->\\r\\n      <ion-card *ngFor=\\\"let evento of eventosPropios\\\">\\r\\n        <div class=\\\"imagen\\\">\\r\\n          <img class=\\\"imagenCard\\\" *ngIf=\\\"evento.imagenEvento\\\" src=\\\"{{evento.imagenEvento}}\\\">\\r\\n          <img class=\\\"imagenCard\\\" *ngIf=\\\"!evento.imagenEvento\\\" src=\\\"../../../assets/evento.jpg\\\">\\r\\n        </div>\\r\\n        <ion-card-header color=\\\"light\\\" style=\\\"height: 45px;\\\">\\r\\n          <ion-card-title class=\\\"card-titulo\\\"><h4>{{evento.nombreEvento}}</h4></ion-card-title>\\r\\n        </ion-card-header>\\r\\n        <ion-card-content style=\\\"margin-top: 12px;\\\">\\r\\n          <b>Ciudad: </b>{{evento.ciudad}}<br>\\r\\n          <b>Direccion: </b>{{evento.direccion}}<br>\\r\\n          <b>Fecha: </b>{{evento.fecha | date: 'dd/MM/yyyy'}}<br>\\r\\n          <b>Hora: </b>{{evento.hora | date: 'HH:mm'}}\\r\\n        </ion-card-content>\\r\\n        <ion-item color=\\\"light\\\">\\r\\n          <ion-icon name=\\\"accessibility-outline\\\"></ion-icon>\\r\\n          <span>{{evento.participantes.length}}</span>\\r\\n          <ion-button class=\\\"option\\\" (click)=\\\"editarEvento(evento._id)\\\" fill=\\\"outline\\\" slot=\\\"end\\\" >Editar</ion-button>\\r\\n          <ion-button class=\\\"option\\\" (click)=\\\"borrarEvento(evento._id)\\\" fill=\\\"outline\\\" slot=\\\"end\\\" color=\\\"danger\\\">Borrar</ion-button> \\r\\n        </ion-item>\\r\\n      </ion-card> \\r\\n    </div>\\r\\n\\r\\n    <!-- Libros -->\\r\\n    <ion-card *ngFor=\\\"let libro of librosPropios\\\">\\r\\n      <div class=\\\"imagen\\\">\\r\\n        <img class=\\\"imagenCard\\\" *ngIf=\\\"libro.imagenLibro\\\" src=\\\"{{libro.imagenLibro}}\\\">\\r\\n        <img class=\\\"imagenCard\\\" *ngIf=\\\"!libro.imagenLibro\\\" src=\\\"../../../assets/registro-bibliofilo.jpg\\\">\\r\\n      </div>\\r\\n      <ion-card-header color=\\\"light\\\" style=\\\"height: 45px;\\\">\\r\\n        <ion-card-title class=\\\"card-titulo\\\"><h4>{{libro.nombreLibro}}</h4></ion-card-title>\\r\\n      </ion-card-header>\\r\\n      <ion-card-content style=\\\"margin-top: 12px;\\\">\\r\\n        <b>GÃ©nero: </b>{{libro.genero}}<br>\\r\\n        <b>Autor: </b>{{libro.autor}}<br>\\r\\n        <b>Precio: </b>{{libro.precio}}\\r\\n      </ion-card-content>\\r\\n      <ion-item color=\\\"light\\\">\\r\\n        <ion-button *ngIf=\\\"libro.participantes.length > 0\\\"  class=\\\"reservado\\\" fill=\\\"outline\\\" slot=\\\"end\\\" color=\\\"success\\\">Reservado</ion-button>\\r\\n        <ion-button class=\\\"option\\\" (click)=\\\"editarLibro(libro._id)\\\" fill=\\\"outline\\\" slot=\\\"end\\\" >Editar</ion-button>\\r\\n        <ion-button class=\\\"option\\\" (click)=\\\"borrarLibro(libro._id)\\\" fill=\\\"outline\\\" slot=\\\"end\\\" color=\\\"danger\\\">Borrar</ion-button> \\r\\n      </ion-item>\\r\\n      <ion-item *ngIf=\\\"libro.participantes.length > 0\\\" class=\\\"personaReservaLibro\\\" color=\\\"light\\\">\\r\\n        <div>\\r\\n          <span>{{libro.participantes[0]}}</span><br>\\r\\n        </div>\\r\\n      </ion-item>\\r\\n    </ion-card>\\r\\n    <ion-infinite-scroll threshold=\\\"200px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\r\\n    <ion-infinite-scroll-content\\r\\n      loadingSpinner=\\\"circular\\\"\\r\\n      loadingText=\\\"Cargando...\\\">\\r\\n    </ion-infinite-scroll-content>\\r\\n  </ion-infinite-scroll>\\r\\n</ion-content>\\r\\n  \\r\\n  <ion-footer class=\\\"bar-stable\\\">\\r\\n    <ion-toolbar class=\\\"tool-foot\\\" color=\\\"light\\\">\\r\\n      <div class=\\\"content-button-event\\\">\\r\\n          <ion-button class=\\\"button-event\\\" (click)=\\\"crearEvento()\\\" fill=\\\"solid\\\" slot=\\\"end\\\" color=\\\"success\\\">Crear evento\\r\\n          </ion-button>\\r\\n          <ion-button class=\\\"button-book\\\" (click)=\\\"publicarLibro()\\\" fill=\\\"solid\\\" slot=\\\"end\\\" color=\\\"medium\\\">Publicar libro\\r\\n          </ion-button>\\r\\n    </div>\\r\\n    </ion-toolbar>\\r\\n  </ion-footer>\\r\\n  \";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { PrincipalLibreriaPage } from './principal-libreria.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PrincipalLibreriaPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class PrincipalLibreriaPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { PrincipalLibreriaPageRoutingModule } from './principal-libreria-routing.module';\r\nimport { PrincipalLibreriaPage } from './principal-libreria.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    PrincipalLibreriaPageRoutingModule\r\n  ],\r\n  declarations: [PrincipalLibreriaPage]\r\n})\r\nexport class PrincipalLibreriaPageModule {}\r\n","export default \".content {\\n  overflow-y: hidden;\\n  background-color: white;\\n}\\n\\n.options {\\n  margin-top: 12px;\\n}\\n\\n.avatar-profile {\\n  position: relative;\\n  left: 285px;\\n  margin-top: 6px;\\n  width: 60px;\\n  height: 60px;\\n}\\n\\n.bar-stable {\\n  margin-top: 12px;\\n}\\n\\n.tool-foot {\\n  text-align: center;\\n  margin-top: 10px;\\n}\\n\\n.card-titulo {\\n  color: #3d3df0;\\n  text-align: center;\\n  font-size: 17px;\\n  height: 45px;\\n  margin-top: -24px;\\n}\\n\\n.button-event, .button-book {\\n  width: 122px;\\n  height: 38px;\\n  margin-top: 14px;\\n  margin-bottom: 12px;\\n}\\n\\n.localizacion, .share {\\n  font-size: 17px;\\n}\\n\\n.option {\\n  font-size: 15px;\\n}\\n\\n.reservado {\\n  font-size: 15px;\\n  position: absolute;\\n  left: 0;\\n}\\n\\n.personaReservaLibro {\\n  font-size: 13px;\\n}\\n\\n.imagen {\\n  width: 344px;\\n  height: 205px;\\n}\\n\\n.imagenCard {\\n  width: 100%;\\n  height: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcHJpbmNpcGFsLWxpYnJlcmlhL3ByaW5jaXBhbC1saWJyZXJpYS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxrQkFBQTtFQUNBLHVCQUFBO0FBQ0o7O0FBQ0E7RUFDSSxnQkFBQTtBQUVKOztBQUFBO0VBQ0ksa0JBQUE7RUFDQSxXQUFBO0VBQ0EsZUFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0FBR0o7O0FBREE7RUFDSSxnQkFBQTtBQUlKOztBQUZBO0VBQ0ksa0JBQUE7RUFDQSxnQkFBQTtBQUtKOztBQUZBO0VBQ0ksY0FBQTtFQUNBLGtCQUFBO0VBQ0EsZUFBQTtFQUNBLFlBQUE7RUFDQSxpQkFBQTtBQUtKOztBQUhBO0VBQ0ksWUFBQTtFQUNBLFlBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0FBTUo7O0FBSkE7RUFDSSxlQUFBO0FBT0o7O0FBTEE7RUFDSSxlQUFBO0FBUUo7O0FBTkE7RUFDSSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSxPQUFBO0FBU0o7O0FBUEE7RUFDSSxlQUFBO0FBVUo7O0FBUkE7RUFDSSxZQUFBO0VBQ0EsYUFBQTtBQVdKOztBQVRBO0VBQ0ksV0FBQTtFQUNBLFlBQUE7QUFZSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3ByaW5jaXBhbC1saWJyZXJpYS9wcmluY2lwYWwtbGlicmVyaWEucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRlbnQge1xyXG4gICAgb3ZlcmZsb3cteTpoaWRkZW47XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxufVxyXG4ub3B0aW9ucyB7XHJcbiAgICBtYXJnaW4tdG9wOiAxMnB4O1xyXG59XHJcbi5hdmF0YXItcHJvZmlsZSB7XHJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICBsZWZ0OiAyODVweDtcclxuICAgIG1hcmdpbi10b3A6IDZweDtcclxuICAgIHdpZHRoOiA2MHB4O1xyXG4gICAgaGVpZ2h0OiA2MHB4O1xyXG59XHJcbi5iYXItc3RhYmxlIHtcclxuICAgIG1hcmdpbi10b3A6IDEycHg7XHJcbn1cclxuLnRvb2wtZm9vdCB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7IFxyXG4gICAgbWFyZ2luLXRvcDogMTBweFxyXG5cclxufVxyXG4uY2FyZC10aXR1bG8ge1xyXG4gICAgY29sb3I6IHJnYig2MSwgNjEsIDI0MCk7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBmb250LXNpemU6IDE3cHg7XHJcbiAgICBoZWlnaHQ6IDQ1cHg7IFxyXG4gICAgbWFyZ2luLXRvcDogLTI0cHg7XHJcbn1cclxuLmJ1dHRvbi1ldmVudCwgLmJ1dHRvbi1ib29rIHtcclxuICAgIHdpZHRoOiAxMjJweDtcclxuICAgIGhlaWdodDogMzhweDtcclxuICAgIG1hcmdpbi10b3A6IDE0cHg7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxMnB4O1xyXG59XHJcbi5sb2NhbGl6YWNpb24sIC5zaGFyZSB7XHJcbiAgICBmb250LXNpemU6IDE3cHg7XHJcbn1cclxuLm9wdGlvbiB7XHJcbiAgICBmb250LXNpemU6IDE1cHg7XHJcbn1cclxuLnJlc2VydmFkb3tcclxuICAgIGZvbnQtc2l6ZTogMTVweDtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIGxlZnQ6IDA7XHJcbn1cclxuLnBlcnNvbmFSZXNlcnZhTGlicm97XHJcbiAgICBmb250LXNpemU6IDEzcHg7XHJcbn1cclxuLmltYWdlbiB7XHJcbiAgICB3aWR0aDogMzQ0cHg7XHJcbiAgICBoZWlnaHQ6IDIwNXB4O1xyXG59XHJcbi5pbWFnZW5DYXJkIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG59XHJcbiJdfQ== */\";","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { Router} from '@angular/router';\r\nimport { Evento } from 'src/app/interfaces/evento';\r\nimport { Libro } from 'src/app/interfaces/libro';\r\nimport { UsuarioService } from '../../services/usuario.service';\r\nimport { EventoService } from '../../services/evento.service';\r\nimport { LibroService } from '../../services/libro.service';\r\nimport { AlertController} from '@ionic/angular';\r\nimport { IonInfiniteScroll } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-principal-libreria',\r\n  templateUrl: './principal-libreria.page.html',\r\n  styleUrls: ['./principal-libreria.page.scss'],\r\n})\r\nexport class PrincipalLibreriaPage implements OnInit {\r\n  @ViewChild(IonInfiniteScroll) infiniteScroll: IonInfiniteScroll;\r\n\r\n  public usuario:String;\r\n  public _id:String;\r\n\r\n  //Para saber en que eventos estamos\r\n  booleanEventos : boolean = true;\r\n\r\n  //lista de eventos propios\r\n  eventosPropios : Evento[]; \r\n\r\n  //lista de libros propios\r\n  librosPropios : Libro[]; \r\n\r\n  //limite de eventos propios\r\n  limitePropio : number = 3; \r\n\r\n  //limite de libros propios\r\n  limiteLibrosPropio : number = 3; \r\n\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private _usuarioService:UsuarioService,\r\n    private _eventoService:EventoService, \r\n    private _libroService:LibroService, \r\n    private alertController: AlertController\r\n    ) { }\r\n\r\n  async ngOnInit() {\r\n    \r\n    const logado  = await this._usuarioService.compruebaSiLogado();\r\n    if(!logado){\r\n      this.router.navigate(['/inicio']);\r\n      return;\r\n    }\r\n    //llamar al servicio\r\n    await this._eventoService.getEventos(this.limitePropio);\r\n    this.usuario = this._usuarioService.usuarioActual.nombre;\r\n    this.eventosPropios = this._eventoService.eventosPropios;\r\n  }\r\n  //Infinitte scroll\r\n  async loadData(event){\r\n      //Tenemos una lista de todos los eventos cargados\r\n      //Tenemos una lista que va a ir cargando los eventos poco a poco - esta es la que se usa\r\n      if(this.booleanEventos){\r\n        //Limite de eventos propios\r\n        this.limitePropio = this.limitePropio + 3;\r\n\r\n        //Antes de llamar al servicio coger los eventos que tenemos ahora mismo\r\n        const numeroVariableAntiguoEvento = this.eventosPropios.length;\r\n        \r\n        //Cargar en la lista propia mis eventos\r\n        await this._eventoService.getEventos(this.limitePropio);\r\n\r\n        //Saber los eventos que tenemos nuevos\r\n        const numeroVariableNuevoEvento = this._eventoService.eventosPropios.length;\r\n\r\n        //Carga del servicio la lista de los eventos\r\n        if(numeroVariableAntiguoEvento == numeroVariableNuevoEvento){\r\n          event.target.disabled = true;\r\n        }else{\r\n          this.eventosPropios = this._eventoService.eventosPropios;\r\n        }\r\n\r\n\r\n      }else{\r\n        //Limite de libros propios\r\n        this.limiteLibrosPropio = this.limiteLibrosPropio + 3;\r\n\r\n        //Antes de llamar al servicio coger los libros que tenemos ahora mismo\r\n        const numeroVariableAntiguoLibro = this.librosPropios.length;\r\n        \r\n        //Cargar en la lista de libros propios\r\n        await this._libroService.getLibros(this.limiteLibrosPropio);\r\n\r\n        //Saber los libros que tenemos nuevos\r\n        const numeroVariableNuevoLibro = this._libroService.librosPropios.length;\r\n\r\n        //Carga del servicio la lista de los libros\r\n        if(numeroVariableAntiguoLibro == numeroVariableNuevoLibro){\r\n          event.target.disabled = true;\r\n        }else{\r\n          this.librosPropios = this._libroService.librosPropios;\r\n        }\r\n\r\n      }\r\n\r\n      //Completar la accion de cargar los eventos\r\n      event.target.complete();\r\n\r\n  }\r\n\r\n  async loadEventosPropios(){\r\n\r\n    this.infiniteScroll.disabled = false;\r\n\r\n    this.booleanEventos = true;\r\n    \r\n    //Quitar de la lista contraria los libros \r\n    this.librosPropios = []; \r\n    \r\n    //limite de eventos propios\r\n    this.limitePropio = 3;\r\n    \r\n    //llamar al servicio para llamar al back para recuperar los eventos\r\n    await this._eventoService.getEventos(this.limitePropio);\r\n    \r\n    //Carga del servicio la lista de los eventos\r\n    this.eventosPropios = this._eventoService.eventosPropios;\r\n  }\r\n\r\n  async loadLibrosPropios(){\r\n\r\n    this.infiniteScroll.disabled = false;\r\n\r\n    this.booleanEventos = false;\r\n    //Quitar de la lista contraria los eventos \r\n    this.eventosPropios = []; \r\n\r\n    //limite de libros propios\r\n    this.limiteLibrosPropio = 3;\r\n\r\n    //llamar al servicio para llamar al back para recuperar los libros\r\n    await this._libroService.getLibros(this.limiteLibrosPropio);\r\n    \r\n    //Carga del servicio la lista de los libros\r\n    this.librosPropios = this._libroService.librosPropios;\r\n  }\r\n\r\n  cerrarSesion(){\r\n    this._usuarioService.cerrarSesion();\r\n    this.router.navigateByUrl('/inicio');\r\n  }\r\n  crearEvento(){\r\n    this.router.navigate(['/registrar-evento']);\r\n  }\r\n  \r\n  editarEvento(_id:String){\r\n    this._eventoService.idEventoModificar = _id;\r\n    this.router.navigate(['/modal-demo']);\r\n  }\r\n\r\n  //borrar evento\r\n  async borrarEvento(evento : any){\r\n    this._eventoService.eventoIdBorrar = evento;\r\n    await this. _eventoService.borrar();\r\n\r\n    let eventoPropio: Evento;\r\n    for(let data of this.eventosPropios){\r\n      if(data._id == evento){\r\n        eventoPropio = data;\r\n      }\r\n    }\r\n    let indexP = this.eventosPropios.indexOf(eventoPropio);\r\n    this.eventosPropios.splice(indexP,1);\r\n  }\r\n\r\n  publicarLibro(){\r\n    this.router.navigate(['/registrar-libro']);\r\n  }\r\n  editarLibro(_id:String){\r\n    this._libroService.idLibroModificar = _id;\r\n    this.router.navigate(['/modal-demo-libro']);\r\n      \r\n  }\r\n  async borrarLibro(libro:any){\r\n    this._libroService.libroIdBorrar = libro;\r\n    await this. _libroService.borrar();\r\n\r\n    let libroPropio: Libro;\r\n    for(let data of this.librosPropios){\r\n      if(data._id == libro){\r\n        libroPropio = data;\r\n      }\r\n    }\r\n    let indexP = this.librosPropios.indexOf(libroPropio);\r\n    this.librosPropios.splice(indexP,1);\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}