{"version":3,"sources":["webpack:///src/app/pages/card-libreria/card-libreria.page.html","webpack:///src/app/pages/card-libreria/card-libreria-routing.module.ts","webpack:///src/app/pages/card-libreria/card-libreria.module.ts","webpack:///src/app/pages/card-libreria/card-libreria.page.scss","webpack:///src/app/pages/card-libreria/card-libreria.page.ts"],"names":["routes","path","component","CardLibreriaPageRoutingModule","imports","forChild","exports","CardLibreriaPageModule","declarations","CardLibreriaPage","router","inAppBrowser","_usuarioService","_eventoService","_libroService","alertController","socialSharing","callNumber","booleanEventos","limiteUsuariosLibreros","limitePropio","limiteLibrosPropio","limiteFavoritos","libreriaPinchada","compruebaSiLogado","logado","usuarioActual","libreriaPinchadaCard","console","log","navigate","verLibrosPicharCard","usuario","nombre","event","numeroVariableAntiguoEvento","eventosPropios","length","nombreLibreriaPinchada","mostrarEventosPicharCard","numeroVariableNuevoEvento","eventoCardPinchada","target","disabled","numeroVariableAntiguoLibro","librosPropios","mostrarLibrosPicharCard","numeroVariableNuevoLibro","libroCardPinchada","complete","cerrarSesion","navigateByUrl","infiniteScroll","usuariosLibreros","mostrarLibreriasFavoritas","usuarioLibreria","libreria","favoritos","push","guadarLibreriaFav","indice","indexOf","splice","borrarLibreriaFav","evento","index","participantes","findIndex","create","cssClass","backdropDismiss","subHeader","buttons","alert","present","datos","_id","apuntarse","desapuntarse","options","message","web","shareWithOptions","libro","nombreLibro","reservarLibro","quitarReservaLibro","telefono","then","res","err","lefttoright","toolbarposition","presentationstyle","toolbartranslucent","location","hidden","hideweblibreria","selector","template"],"mappings":"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","file":"pages-card-libreria-card-libreria-module-es5.js","sourcesContent":["export default \" <ion-header>\\r\\n   <div (click)=\\\"volver()\\\" color=\\\"none\\\" no-shadow>\\r\\n    <ion-icon class=\\\"volver\\\" name=\\\"arrow-back-outline\\\"></ion-icon>\\r\\n  </div>\\r\\n </ion-header>\\r\\n  \\r\\n <ion-content>\\r\\n  <div class=\\\"ion-padding\\\">\\r\\n    <ion-toolbar>\\r\\n      <ion-segment>\\r\\n        <ion-segment-button (click)=\\\"verLibrosPicharCard()\\\" value=\\\"b\\\">Libros</ion-segment-button>\\r\\n        <ion-segment-button (click)=\\\"verEventosPincharCard()\\\" value=\\\"c\\\">Eventos</ion-segment-button>\\r\\n      </ion-segment>\\r\\n    </ion-toolbar>\\r\\n\\r\\n    <!-- Libros -->\\r\\n    <ion-card *ngFor=\\\"let libro of librosPropios\\\">\\r\\n      <div class=\\\"imagen\\\">\\r\\n        <img class=\\\"imagenCard\\\" *ngIf=\\\"libro.imagenLibro\\\" src=\\\"{{libro.imagenLibro}}\\\">\\r\\n        <img class=\\\"imagenCard\\\" *ngIf=\\\"!libro.imagenLibro\\\" src=\\\"../../../assets/registro-bibliofilo.jpg\\\">\\r\\n      </div>\\r\\n      <ion-card-header color=\\\"light\\\" style=\\\"height: 45px;\\\">\\r\\n        <ion-card-title class=\\\"cardStyle\\\"><h4>{{libro.nombreLibro}}</h4></ion-card-title>\\r\\n      </ion-card-header>\\r\\n      <ion-card-content style=\\\"margin-top: 12px;\\\">\\r\\n        <b>Género: </b>{{libro.genero}}<br>\\r\\n        <b>Autor: </b>{{libro.autor}}<br>\\r\\n        <b>Precio: </b>{{libro.precio}}\\r\\n      </ion-card-content>\\r\\n      <ion-item color=\\\"light\\\">\\r\\n        <ion-button *ngIf=\\\"!libro.participantes.includes(this.usuario)\\\" class=\\\"fav\\\" (click)=\\\"reservarLibro(libro)\\\" expand=\\\"block\\\" fill=\\\"clear\\\" shape=\\\"round\\\">\\r\\n         <ion-icon name=\\\"bag-outline\\\" color=\\\"dark\\\"></ion-icon>\\r\\n        </ion-button>\\r\\n        <ion-button *ngIf=\\\"libro.participantes.includes(this.usuario)\\\" class=\\\"fav\\\" (click)=\\\"quitarReservaLibro(libro)\\\" expand=\\\"block\\\" fill=\\\"clear\\\" shape=\\\"round\\\">\\r\\n        <ion-icon name=\\\"bag-check-outline\\\" color=\\\"dark\\\"></ion-icon>\\r\\n        </ion-button>\\r\\n      </ion-item>\\r\\n    </ion-card>\\r\\n\\r\\n    <!-- Eventos -->\\r\\n    <ion-card *ngFor=\\\"let evento of eventosPropios\\\">\\r\\n      <div class=\\\"imagen\\\">\\r\\n        <img class=\\\"imagenCard\\\" *ngIf=\\\"evento.imagenEvento\\\" src=\\\"{{evento.imagenEvento}}\\\">\\r\\n        <img class=\\\"imagenCard\\\" *ngIf=\\\"!evento.imagenEvento\\\" src=\\\"../../../assets/evento.jpg\\\">\\r\\n      </div>\\r\\n      <ion-card-header color=\\\"light\\\" style=\\\"height: 45px;\\\">\\r\\n        <ion-card-title class=\\\"cardStyle\\\"><h4>{{evento.nombreEvento}}</h4></ion-card-title>\\r\\n      </ion-card-header>\\r\\n      <ion-card-content style=\\\"margin-top: 12px;\\\">\\r\\n        <b>Ciudad: </b>{{evento.ciudad}}<br>\\r\\n        <b>Direccion: </b>{{evento.direccion}}<br>\\r\\n        <b>Fecha: </b>{{evento.fecha | date: 'dd/MM/yyyy'}}<br>\\r\\n        <b>Hora: </b>{{evento.hora | date: 'HH:mm'}}\\r\\n      </ion-card-content>\\r\\n        <ion-item color=\\\"light\\\">\\r\\n        <ion-button class=\\\"apuntarse\\\" *ngIf=\\\"!evento.participantes.includes(this.usuario)\\\" (click)=\\\"apuntarse(evento)\\\" fill=\\\"outline\\\" slot=\\\"end\\\" expand=\\\"block\\\" [mode]=\\\"'md'\\\">Apuntarse</ion-button>\\r\\n        <ion-button class=\\\"desapuntarse\\\" *ngIf=\\\"evento.participantes.includes(this.usuario)\\\" (click)=\\\"desapuntarse(evento)\\\" fill=\\\"outline\\\" slot=\\\"end\\\" expand=\\\"block\\\" [mode]=\\\"'md'\\\" color=\\\"dark\\\" >Borrarse</ion-button>\\r\\n      </ion-item>\\r\\n    </ion-card>\\r\\n  </div>\\r\\n  <ion-infinite-scroll threshold=\\\"200px\\\" (ionInfinite)=\\\"loadData($event)\\\">\\r\\n    <ion-infinite-scroll-content\\r\\n      loadingSpinner=\\\"circular\\\"\\r\\n      loadingText=\\\"Cargando...\\\">\\r\\n    </ion-infinite-scroll-content>\\r\\n  </ion-infinite-scroll>\\r\\n</ion-content>\\r\\n\\r\\n<ion-footer class=\\\"bar-stable\\\">\\r\\n  <ion-toolbar class=\\\"tool-foot\\\" color=\\\"light\\\">\\r\\n    <div class=\\\"content-button-event\\\">\\r\\n      <ion-button class=\\\"button-telefono\\\" (click)=\\\"telefono()\\\" fill=\\\"outline\\\" slot=\\\"end\\\" color=\\\"primary\\\">\\r\\n        <ion-icon name=\\\"call-outline\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n      <ion-button class=\\\"button-web\\\" (click)=\\\"web()\\\" fill=\\\"outline\\\" slot=\\\"end\\\" color=\\\"medium\\\">\\r\\n        <ion-icon name=\\\"globe-outline\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n  </div>\\r\\n  </ion-toolbar>\\r\\n</ion-footer>\\r\\n\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { CardLibreriaPage } from './card-libreria.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CardLibreriaPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class CardLibreriaPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { CardLibreriaPageRoutingModule } from './card-libreria-routing.module';\r\nimport { CardLibreriaPage } from './card-libreria.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    CardLibreriaPageRoutingModule\r\n  ],\r\n  declarations: [CardLibreriaPage]\r\n})\r\nexport class CardLibreriaPageModule {}\r\n","export default \".cardStyle {\\n  text-align: center;\\n  font-size: 17px;\\n  height: 45px;\\n  margin-top: -22px;\\n}\\n\\n.apuntarse, .desapuntarse {\\n  font-size: 10px;\\n  padding-top: 2.5px;\\n}\\n\\n.volver {\\n  font-size: 23px;\\n  margin-top: 12px;\\n  margin-left: 18px;\\n}\\n\\n.content-button-event {\\n  text-align: center;\\n}\\n\\n.imagen {\\n  width: 311px;\\n  height: 205px;\\n}\\n\\n.imagenCard {\\n  width: 100%;\\n  height: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY2FyZC1saWJyZXJpYS9jYXJkLWxpYnJlcmlhLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGtCQUFBO0VBQ0EsZUFBQTtFQUNBLFlBQUE7RUFDQSxpQkFBQTtBQUNKOztBQUNBO0VBQ0ksZUFBQTtFQUNBLGtCQUFBO0FBRUo7O0FBQUE7RUFDSSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQTtBQUdKOztBQURBO0VBQ0ksa0JBQUE7QUFJSjs7QUFGQTtFQUNJLFlBQUE7RUFDQSxhQUFBO0FBS0o7O0FBSEE7RUFDSSxXQUFBO0VBQ0EsWUFBQTtBQU1KIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvY2FyZC1saWJyZXJpYS9jYXJkLWxpYnJlcmlhLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jYXJkU3R5bGUge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyOyBcclxuICAgIGZvbnQtc2l6ZTogMTdweDsgXHJcbiAgICBoZWlnaHQ6IDQ1cHg7IFxyXG4gICAgbWFyZ2luLXRvcDogLTIycHg7XHJcbn1cclxuLmFwdW50YXJzZSwgLmRlc2FwdW50YXJzZXtcclxuICAgIGZvbnQtc2l6ZTogMTBweDtcclxuICAgIHBhZGRpbmctdG9wOiAyLjVweDtcclxufVxyXG4udm9sdmVyIHtcclxuICAgIGZvbnQtc2l6ZTogMjNweDtcclxuICAgIG1hcmdpbi10b3A6IDEycHg7XHJcbiAgICBtYXJnaW4tbGVmdDogMThweDtcclxufVxyXG4uY29udGVudC1idXR0b24tZXZlbnR7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuLmltYWdlbiB7XHJcbiAgICB3aWR0aDogMzExcHg7XHJcbiAgICBoZWlnaHQ6IDIwNXB4O1xyXG59XHJcbi5pbWFnZW5DYXJkIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG59XHJcbiJdfQ== */\";","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { InAppBrowser } from '@ionic-native/in-app-browser/ngx';\r\nimport { Router} from '@angular/router';\r\nimport { Evento } from 'src/app/interfaces/evento';\r\nimport { Libro } from 'src/app/interfaces/libro';\r\nimport { usuarios } from 'src/app/interfaces/usuarios';\r\nimport { UsuarioService } from '../../services/usuario.service';\r\nimport { EventoService } from '../../services/evento.service';\r\nimport { LibroService } from '../../services/libro.service';\r\nimport { AlertController} from '@ionic/angular';\r\nimport { IonInfiniteScroll } from '@ionic/angular';\r\nimport { SocialSharing } from '@ionic-native/social-sharing/ngx';\r\nimport { CallNumber} from '@ionic-native/call-number/ngx';\r\n\r\n@Component({\r\n  selector: 'app-card-libreria',\r\n  templateUrl: './card-libreria.page.html',\r\n  styleUrls: ['./card-libreria.page.scss'],\r\n})\r\nexport class CardLibreriaPage implements OnInit {\r\n  @ViewChild(IonInfiniteScroll) infiniteScroll: IonInfiniteScroll;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private inAppBrowser: InAppBrowser,\r\n    private _usuarioService:UsuarioService,\r\n    private _eventoService:EventoService,\r\n    private _libroService:LibroService,\r\n    private alertController: AlertController,\r\n    private socialSharing : SocialSharing,\r\n    private callNumber: CallNumber,\r\n   \r\n    \r\n    ) { }\r\n\r\n  public usuario:String;\r\n  public usuarioActual:any;\r\n  public _id:String;\r\n\r\n  //Para saber en que eventos estamos\r\n  booleanEventos : boolean = true;\r\n\r\n  //lista de eventos propios\r\n  eventosPropios : Evento[]; \r\n\r\n  //lista de libros propios\r\n  librosPropios : Libro[]; \r\n\r\n  //lista de usuarios\r\n  usuariosLibreros : usuarios[]; \r\n\r\n  //limite de usuarios\r\n  limiteUsuariosLibreros : number = 3; \r\n\r\n  //lista de favoritos\r\n  favoritos : usuarios[]; \r\n\r\n  //limite de eventos propios\r\n  limitePropio : number = 3; \r\n\r\n  //limite de libros propios\r\n  limiteLibrosPropio : number = 3; \r\n\r\n  //limite de favoritos\r\n  limiteFavoritos : number = 3; \r\n\r\n  //libreria pinchada\r\n  libreriaPinchada : any = {};\r\n\r\n  async ngOnInit() {\r\n    \r\n    const logado  = await this._usuarioService.compruebaSiLogado();\r\n    this.usuarioActual = this._usuarioService.usuarioActual;\r\n    this.libreriaPinchada = this._usuarioService.libreriaPinchadaCard;\r\n\r\n    console.log(this.libreriaPinchada);\r\n    if(!logado){\r\n      this.router.navigate(['/inicio']);\r\n      return;\r\n    }\r\n\r\n    //Para que se muestren las librerias al entrar en el perfil, que sea lo primero que se cargue\r\n    this.verLibrosPicharCard();\r\n\r\n    //llamar al servicio de usuario\r\n    this.usuario = this._usuarioService.usuarioActual.nombre;\r\n   \r\n  }\r\n  //Infinitte scroll\r\n  async loadData(event){\r\n\r\n      //Tenemos una lista de todos los eventos cargados\r\n      //Tenemos una lista que va a ir cargando los eventos poco a poco - esta es la que se usa\r\n      if(this.booleanEventos){\r\n\r\n        //Limite de eventos propios\r\n        this.limitePropio = this.limitePropio+3; \r\n\r\n        //Antes de llamar al servicio coger los eventos que tenemos ahora mismo\r\n        const numeroVariableAntiguoEvento = this.eventosPropios.length;\r\n\r\n        //Llamar al servicio para llamar al back para recuperar los eventos\r\n        let nombreLibreriaPinchada = this.libreriaPinchada.nombre;\r\n        await this._eventoService.mostrarEventosPicharCard(this.limitePropio, nombreLibreriaPinchada); \r\n        \r\n        //Saber los eventos que tenemos nuevos\r\n        const numeroVariableNuevoEvento = this._eventoService.eventoCardPinchada.length;\r\n\r\n        //Carga del servicio la lista de los eventos\r\n        if(numeroVariableAntiguoEvento == numeroVariableNuevoEvento){\r\n          event.target.disabled = true;\r\n        }else{\r\n          this.eventosPropios = this._eventoService.eventoCardPinchada;\r\n        }\r\n\r\n      }else{\r\n\r\n        //Limite de libros\r\n        this.limiteLibrosPropio = this.limiteLibrosPropio+3; \r\n\r\n        //Antes de llamar al servicio coger los libros que tenemos ahora mismo\r\n        const numeroVariableAntiguoLibro = this.librosPropios.length;\r\n\r\n        //Llamar al servicio para llamar al back para recuperar los libros\r\n        let nombreLibreriaPinchada = this.libreriaPinchada.nombre;\r\n        await this._libroService.mostrarLibrosPicharCard(this.limiteLibrosPropio, nombreLibreriaPinchada);\r\n\r\n        //Saber los libros que tenemos nuevos\r\n        const numeroVariableNuevoLibro = this._libroService.libroCardPinchada.length;\r\n\r\n        //Carga del servicio la lista de los libros\r\n        if(numeroVariableAntiguoLibro == numeroVariableNuevoLibro){\r\n          event.target.disabled = true;\r\n        }else{\r\n          this.librosPropios = this._libroService.libroCardPinchada;\r\n        }\r\n\r\n      }\r\n      //completar la accion de cargar los eventos\r\n      event.target.complete(); \r\n  }\r\n\r\n  cerrarSesion(){\r\n    this._usuarioService.cerrarSesion();\r\n    this.router.navigateByUrl('/inicio');\r\n  }\r\n\r\n  async verLibrosPicharCard() {\r\n    \r\n    this.infiniteScroll.disabled = false;\r\n\r\n    this.booleanEventos = false;\r\n\r\n    //Quitar de la lista contraria los eventos\r\n    this.eventosPropios = []; \r\n\r\n    //Quitar de la lista contraria las librerias\r\n    this.usuariosLibreros = []; \r\n\r\n    //Limite de libros\r\n    this.limiteLibrosPropio = 3; \r\n\r\n    //Llamar al servicio para llamar al back para recuperar los libros\r\n    let nombreLibreriaPinchada = this.libreriaPinchada.nombre;\r\n    await this._libroService.mostrarLibrosPicharCard(this.limiteLibrosPropio, nombreLibreriaPinchada);\r\n\r\n    //Carga del servicio la lista de libros\r\n    this.librosPropios = this._libroService.libroCardPinchada;\r\n}\r\n\r\nasync verEventosPincharCard() {\r\n    \r\n    this.infiniteScroll.disabled = false;\r\n\r\n    this.booleanEventos = true;\r\n\r\n    //Quitar de la lista contraria las librerias\r\n    this.usuariosLibreros = []; \r\n\r\n    //Quitar de la lista contraria los libros\r\n    this.librosPropios = [];\r\n\r\n    //Limite de eventos propios\r\n    this.limitePropio = 3; \r\n    \r\n    //Llamar al servicio para llamar al back para recuperar los eventos\r\n    let nombreLibreriaPinchada = this.libreriaPinchada.nombre;\r\n    await this._eventoService.mostrarEventosPicharCard(this.limitePropio, nombreLibreriaPinchada); \r\n    \r\n    //Carga del servicio la lista de los eventos\r\n    this.eventosPropios = this._eventoService.eventoCardPinchada;\r\n}\r\n\r\n//Boton del menu - favoritos\r\nasync fav() {\r\n\r\n    //Quitar de la lista contraria los eventos\r\n    this.eventosPropios = []; \r\n\r\n    //Quitar de la lista contraria los libros\r\n    this.librosPropios = [];\r\n\r\n    //Limpiar la propia lista en favoritos\r\n    this.usuariosLibreros = [];\r\n\r\n    //Limite favoritos\r\n    this.limiteFavoritos = 3; \r\n\r\n    //Llamar al servicio para llamar al back para recuperar las librerias favoritas \r\n    await this._usuarioService.mostrarLibreriasFavoritas(this.limiteFavoritos);\r\n    \r\n    //Carga del servicio la lista de favoritos \r\n    this.usuariosLibreros = this._usuarioService.usuarioLibreria;\r\n}\r\n\r\nguardarFavorito(libreria){\r\n  this._usuarioService.usuarioActual.favoritos.push(libreria);\r\n  this._usuarioService.guadarLibreriaFav(libreria);\r\n}\r\n\r\nborrarFavorito(libreria){\r\n  // obtenemos el indice\r\n  var indice = this._usuarioService.usuarioActual.favoritos.indexOf(libreria);\r\n\r\n  // 1 es la cantidad de elemento a eliminar\r\n  this._usuarioService.usuarioActual.favoritos.splice(indice,1);\r\n\r\n  //borrar la libreria\r\n  this._usuarioService.borrarLibreriaFav(libreria);\r\n}\r\n\r\n//Apuntarse al evento\r\nasync apuntarse(evento:Evento){\r\n  //Contemplar mensaje de apuntarse o mensaje de evento completo\r\n    const index = evento.participantes.findIndex(usuario => usuario === this.usuario);\r\n\r\n    if(index > -1){\r\n      const alert = await this.alertController.create({\r\n        cssClass: 'my-custom-class',\r\n        backdropDismiss: false,\r\n        subHeader: 'Ya estás apuntado en este evento',\r\n        buttons: ['OK']\r\n      });\r\n      await alert.present();\r\n    }else{\r\n      if(evento.participantes.length === 10){\r\n        const alert = await this.alertController.create({\r\n          cssClass: 'my-custom-class',\r\n          backdropDismiss: false,\r\n          subHeader: 'Evento completado',\r\n          buttons: ['OK']\r\n        });\r\n        await alert.present();\r\n      }else{\r\n        const alert = await this.alertController.create({\r\n          cssClass: 'my-custom-class',\r\n          subHeader: '¡Te has apuntado al evento!',\r\n          buttons: ['OK']\r\n        });\r\n        await alert.present();\r\n\r\n        evento.participantes.push(this.usuario);\r\n    \r\n        const datos = {\r\n          _id: evento._id,\r\n        }\r\n         this._eventoService.apuntarse(datos); \r\n       }\r\n     } \r\n}\r\n\r\n//Desapuntarse del evento\r\nasync desapuntarse(evento:Evento){\r\n   var indice = evento.participantes.indexOf(this.usuario); // obtenemos el indice\r\n    evento.participantes.splice(indice,1); // 1 es la cantidad de elemento a eliminar\r\n    \r\n    const datos = {\r\n      _id: evento._id,\r\n    }\r\n    await this._eventoService.desapuntarse(datos);\r\n\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      backdropDismiss: false,\r\n      subHeader: 'Te has borrado del evento',\r\n      buttons: ['OK']\r\n    });\r\n    await alert.present();\r\n}\r\n\r\ncompartirLibreria(usuario){                  \r\n   var options = {\r\n    message: 'Mira esta librería', // not supported on some apps (Facebook, Instagram)\r\n    web: usuario.web\r\n };\r\n    this.socialSharing.shareWithOptions(options);\r\n  }\r\n\r\nasync reservarLibro(libro:Libro){\r\n    const index = libro.participantes.findIndex(usuario => usuario === this.usuario);\r\n\r\n    const alert = await this.alertController.create({\r\n        cssClass: 'my-custom-class',\r\n        subHeader: '¡Has reservado el libro con éxito!',\r\n        buttons: ['OK']\r\n      });\r\n      await alert.present();\r\n\r\n      libro.participantes.push(this.usuario);\r\n    \r\n      const datos = {\r\n        nombreLibro: libro.nombreLibro,\r\n      }\r\n      this._libroService.reservarLibro(datos); \r\n}\r\n\r\nasync quitarReservaLibro(libro:Libro){\r\n  var indice = libro.participantes.indexOf(this.usuario); // obtenemos el indice\r\n    libro.participantes.splice(indice,1); // 1 es la cantidad de elemento a eliminar\r\n    \r\n    const datos = {\r\n      nombreLibro: libro.nombreLibro,\r\n    }\r\n    await this._libroService.quitarReservaLibro(datos);\r\n\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      backdropDismiss: false,\r\n      subHeader: 'Has cancelado la reserva del libro con éxito',\r\n      buttons: ['OK']\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  volver(){\r\n    this.router.navigateByUrl('/perfil');\r\n  }\r\n\r\n  telefono(){\r\n    const telefono = this.libreriaPinchada.telefono;\r\n    this.callNumber.callNumber(telefono, true)\r\n    .then(res => console.log('Abriendo marcador', res))\r\n    .catch(err => console.log('Error marcador', err));\r\n  }\r\n\r\n  web(){\r\n    let web = this.libreriaPinchada.web;\r\n    this.inAppBrowser.create(web, '_blank',{ \r\n      lefttoright: 'yes',\r\n      toolbarposition: 'top',\r\n      presentationstyle:'fullscreen',\r\n      toolbartranslucent:\t'yes',\r\n      location: 'yes',\r\n      hidden: 'no',\r\n      hideweblibreria:\t'yes'\r\n    });\r\n\r\n  }\r\n}\r\n"]}