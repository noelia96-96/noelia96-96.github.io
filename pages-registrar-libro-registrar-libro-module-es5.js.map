{"version":3,"sources":["webpack:///src/app/pages/registrar-libro/registrar-libro.page.html","webpack:///src/app/pages/registrar-libro/registrar-libro-routing.module.ts","webpack:///src/app/pages/registrar-libro/registrar-libro.module.ts","webpack:///src/app/pages/registrar-libro/registrar-libro.page.scss","webpack:///src/app/pages/registrar-libro/registrar-libro.page.ts"],"names":["routes","path","component","RegistrarLibroPageRoutingModule","imports","forChild","exports","RegistrarLibroPageModule","declarations","RegistrarLibroPage","_router","_libroService","_usuarioService","camera","participantes","compruebaSiLogado","usuario","usuarioActual","nombre","data","nombreLibro","genero","autor","precio","base64","mostrarImagen","registrarLibro","navigate","getPicture","destinationType","DestinationType","DATA_URL","sourceType","PictureSourceType","PHOTOLIBRARY","mediaType","MediaType","PICTURE","allowEdit","encodingType","EncodingType","JPEG","targetHeight","targetWidth","correctOrientation","saveToPhotoAlbum","then","resultado","err","console","log","CAMERA","selector","template"],"mappings":"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","file":"pages-registrar-libro-registrar-libro-module-es5.js","sourcesContent":["export default \"<ion-header class=\\\"ion-no-border\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-title>\\r\\n      Registrar Libro\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<body>\\r\\n  <ion-list class=\\\"register-content\\\">\\r\\n    <ion-item class=\\\"creador\\\">\\r\\n      <ion-label  type=\\\"text\\\" name=\\\"creador\\\">{{this.usuario}}</ion-label>\\r\\n    </ion-item>\\r\\n    <ion-item class=\\\"nombreLibro\\\">\\r\\n      <ion-input  [(ngModel)]=\\\"nombreLibro\\\"  type=\\\"text\\\" name=\\\"nombreLibro\\\" placeholder=\\\"*Nombre del libro\\\" autofocus required></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item class=\\\"genero\\\">\\r\\n      <ion-input  [(ngModel)]=\\\"genero\\\"  type=\\\"text\\\" name=\\\"genero\\\" placeholder=\\\"*Género\\\" autofocus required></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item class=\\\"autor\\\">\\r\\n      <ion-input  [(ngModel)]=\\\"autor\\\"  type=\\\"text\\\" name=\\\"autor\\\" placeholder=\\\"*Autor\\\" autofocus required></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item class=\\\"precio\\\">\\r\\n      <ion-input  [(ngModel)]=\\\"precio\\\"  type=\\\"text\\\" name=\\\"precio\\\" placeholder=\\\"*Precio\\\" autofocus required></ion-input>\\r\\n    </ion-item>\\r\\n    <div style=\\\"text-align: center;\\\">\\r\\n      <ion-button class=\\\"button-galeria\\\" style=\\\"margin-top: 10px;\\\"color=\\\"primary\\\" fill=\\\"outline\\\" slot=\\\"end\\\" (click)=\\\"abrirGaleria()\\\">\\r\\n          <ion-icon name=\\\"image-outline\\\"></ion-icon>\\r\\n          <ion-label style=\\\"margin-left: 10px;\\\">Galería</ion-label>\\r\\n      </ion-button>\\r\\n      <ion-button class=\\\"button-camara\\\" style=\\\"margin-top: 10px;\\\"color=\\\"primary\\\" fill=\\\"outline\\\" slot=\\\"end\\\" (click)=\\\"abrirCamara()\\\">\\r\\n          <ion-icon name=\\\"camera-outline\\\"></ion-icon>\\r\\n          <ion-label style=\\\"margin-left: 10px;\\\">Cámara</ion-label>\\r\\n      </ion-button>\\r\\n      </div>\\r\\n  </ion-list>\\r\\n  <div class=\\\"registration-book\\\">\\r\\n    <img src=\\\"../../../assets/publicar-libro.jpg\\\">\\r\\n  </div>\\r\\n</body>\\r\\n\\r\\n<ion-footer class=\\\"bar-stable\\\">\\r\\n  <ion-toolbar color=\\\"light\\\">\\r\\n    <div style=\\\"text-align: center;\\\">\\r\\n  <ion-button (click)=\\\"guardar()\\\" class=\\\"save-button\\\" disabled=\\\"{{!this.nombreLibro || !this.genero || !this.autor || !this.precio}}\\\" color=\\\"secondary\\\" style=\\\"margin-left:0%\\\" >\\r\\n    <ion-icon name=\\\"save-outline\\\"></ion-icon>\\r\\n    <ion-label style=\\\"margin-left: 10px;\\\">Guardar</ion-label>\\r\\n  </ion-button>\\r\\n  <ion-button (click)=\\\"cancelar()\\\" class=\\\"cancel-button\\\" color=\\\"secondary\\\" style=\\\"margin-left:5%\\\" >\\r\\n    <ion-icon name=\\\"close\\\"></ion-icon>\\r\\n    <ion-label style=\\\"margin-left: 10px;\\\">Cancelar</ion-label>\\r\\n  </ion-button> \\r\\n</div>\\r\\n</ion-toolbar>\\r\\n</ion-footer>\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { RegistrarLibroPage } from './registrar-libro.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: RegistrarLibroPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class RegistrarLibroPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { RegistrarLibroPageRoutingModule } from './registrar-libro-routing.module';\r\nimport { RegistrarLibroPage } from './registrar-libro.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RegistrarLibroPageRoutingModule\r\n  ],\r\n  declarations: [RegistrarLibroPage]\r\n})\r\nexport class RegistrarLibroPageModule {}\r\n","export default \"body {\\n  overflow-y: hidden;\\n  background-color: white;\\n}\\n\\n.register-content {\\n  margin-top: 72px;\\n  margin-left: 12px;\\n}\\n\\n.creador, .nombreLibro, .genero, .autor, .precio {\\n  border: 1px solid #3880ff;\\n  border-radius: 30px;\\n  height: 43px;\\n  width: 291px;\\n  font-size: 15px;\\n  margin-left: 30px;\\n  margin-bottom: 10px;\\n}\\n\\n.registration-book {\\n  width: 228px;\\n  margin-top: 45px;\\n  margin-left: 79px;\\n}\\n\\n.save-button, .cancel-button {\\n  width: 113px;\\n  height: 34px;\\n}\\n\\n.button-galeria, .button-camara {\\n  margin-right: 21px;\\n}\\n\\n.save-button, .cancel-button {\\n  width: 113px;\\n  height: 34px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcmVnaXN0cmFyLWxpYnJvL3JlZ2lzdHJhci1saWJyby5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxrQkFBQTtFQUNBLHVCQUFBO0FBQ0o7O0FBQ0E7RUFDSSxnQkFBQTtFQUNBLGlCQUFBO0FBRUo7O0FBQUE7RUFDSSx5QkFBQTtFQUNBLG1CQUFBO0VBQ0EsWUFBQTtFQUNBLFlBQUE7RUFDQSxlQUFBO0VBQ0EsaUJBQUE7RUFDQSxtQkFBQTtBQUdKOztBQURBO0VBQ0ksWUFBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7QUFJSjs7QUFGQTtFQUNJLFlBQUE7RUFDQSxZQUFBO0FBS0o7O0FBSEE7RUFDSSxrQkFBQTtBQU1KOztBQUpBO0VBQ0ksWUFBQTtFQUNBLFlBQUE7QUFPSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3JlZ2lzdHJhci1saWJyby9yZWdpc3RyYXItbGlicm8ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiYm9keSB7XHJcbiAgICBvdmVyZmxvdy15OmhpZGRlbjtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG59XHJcbi5yZWdpc3Rlci1jb250ZW50IHtcclxuICAgIG1hcmdpbi10b3A6IDcycHg7XHJcbiAgICBtYXJnaW4tbGVmdDogMTJweDtcclxufVxyXG4uY3JlYWRvciwubm9tYnJlTGlicm8sIC5nZW5lcm8sIC5hdXRvciwgLnByZWNpbyB7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjMzg4MGZmO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMzBweDtcclxuICAgIGhlaWdodDogNDNweDtcclxuICAgIHdpZHRoOiAyOTFweDtcclxuICAgIGZvbnQtc2l6ZTogMTVweDtcclxuICAgIG1hcmdpbi1sZWZ0OiAzMHB4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxufVxyXG4ucmVnaXN0cmF0aW9uLWJvb2sge1xyXG4gICAgd2lkdGg6IDIyOHB4O1xyXG4gICAgbWFyZ2luLXRvcDogNDVweDtcclxuICAgIG1hcmdpbi1sZWZ0OiA3OXB4O1xyXG59XHJcbi5zYXZlLWJ1dHRvbiwgLmNhbmNlbC1idXR0b24ge1xyXG4gICAgd2lkdGg6IDExM3B4O1xyXG4gICAgaGVpZ2h0OiAzNHB4O1xyXG59XHJcbi5idXR0b24tZ2FsZXJpYSwgLmJ1dHRvbi1jYW1hcmEge1xyXG4gICAgbWFyZ2luLXJpZ2h0OiAyMXB4O1xyXG59XHJcbi5zYXZlLWJ1dHRvbiwgLmNhbmNlbC1idXR0b24ge1xyXG4gICAgd2lkdGg6IDExM3B4O1xyXG4gICAgaGVpZ2h0OiAzNHB4O1xyXG59XHJcbiJdfQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { Router} from '@angular/router';\r\nimport { LibroService } from '../../services/libro.service';\r\nimport { ActivatedRoute} from '@angular/router';\r\nimport { UsuarioService } from '../../services/usuario.service';\r\nimport { Libro } from '../../interfaces/libro';\r\nimport { Camera } from '@ionic-native/camera/ngx';\r\n\r\n@Component({\r\n  selector: 'app-registrar-libro',\r\n  templateUrl: './registrar-libro.page.html',\r\n  styleUrls: ['./registrar-libro.page.scss'],\r\n})\r\nexport class RegistrarLibroPage implements OnInit {\r\n\r\n  constructor(\r\n    private _router: Router,\r\n    private _libroService:LibroService,\r\n    private _usuarioService:UsuarioService,\r\n    private camera : Camera\r\n    ) { }\r\n\r\n  public usuario: string;\r\n  //Datos registro libro\r\n  //public creador: string;\r\n  public nombreLibro: string;\r\n  public genero: string;\r\n  public autor: string;\r\n  public precio: number;\r\n  public participantes: string[] = [];\r\n  mostrarImagen : string;\r\n\r\n  async ngOnInit() {\r\n    await this._usuarioService.compruebaSiLogado();\r\n    this.usuario = this._usuarioService.usuarioActual.nombre;\r\n  }\r\n\r\n  async guardar(){\r\n    const data = {\r\n      //creador: this.usuario, El creador NO se le pasa en la costante desde el front,en el back se coge del token.\r\n      nombreLibro: this.nombreLibro,\r\n      genero: this.genero,\r\n      autor: this.autor,\r\n      precio: this.precio,\r\n      participantes: this.participantes,\r\n      base64 : this.mostrarImagen\r\n    }\r\n    await this._libroService.registrarLibro(data);\r\n\r\n    this._router.navigate(['/principal-libreria']);\r\n  }\r\n\r\n  cancelar(){\r\n    //Poner 'refresh' para que al guardar, el nuevo libro aparezca en la pagina principal del librero\r\n    this._router.navigate(['/principal-libreria']);//linea incompleta, da error con el 'refresh'\r\n  \r\n  }\r\n\r\n  abrirGaleria(){\r\n    this.camera.getPicture({\r\n      destinationType: this.camera.DestinationType.DATA_URL,\r\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,\r\n      mediaType: this.camera.MediaType.PICTURE,\r\n      allowEdit: false,\r\n      encodingType: this.camera.EncodingType.JPEG,\r\n      targetHeight: 1024,\r\n      targetWidth: 1024,\r\n      correctOrientation: true,\r\n      saveToPhotoAlbum: true\r\n    }).then(resultado =>{\r\n      this.mostrarImagen = 'data:image/jpeg;base64,' + resultado;\r\n\r\n    }).catch(err =>{\r\n      console.log('Err', err);\r\n    })\r\n\r\n  }\r\n\r\n  abrirCamara(){\r\n    this.camera.getPicture({\r\n      destinationType: this.camera.DestinationType.DATA_URL,\r\n      sourceType: this.camera.PictureSourceType.CAMERA,\r\n      mediaType: this.camera.MediaType.PICTURE,\r\n      allowEdit: false,\r\n      encodingType: this.camera.EncodingType.JPEG,\r\n      targetHeight: 1024,\r\n      targetWidth: 1024,\r\n      correctOrientation: true,\r\n      saveToPhotoAlbum: true\r\n    }).then(resultado =>{\r\n      this.mostrarImagen = 'data:image/jpeg;base64,' + resultado;\r\n\r\n    }).catch(err =>{\r\n      console.log('Err', err);\r\n    })\r\n  }\r\n}\r\n"]}