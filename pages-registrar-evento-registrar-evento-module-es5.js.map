{"version":3,"sources":["webpack:///src/app/pages/registrar-evento/registrar-evento.page.html","webpack:///src/app/pages/registrar-evento/registrar-evento-routing.module.ts","webpack:///src/app/pages/registrar-evento/registrar-evento.module.ts","webpack:///src/app/pages/registrar-evento/registrar-evento.page.scss","webpack:///src/app/pages/registrar-evento/registrar-evento.page.ts"],"names":["routes","path","component","RegistrarEventoPageRoutingModule","imports","forChild","exports","RegistrarEventoPageModule","declarations","RegistrarEventoPage","_router","_eventoService","_usuarioService","camera","participantes","compruebaSiLogado","usuario","usuarioActual","nombre","ciudad","data","nombreEvento","direccion","fecha","hora","base64","mostrarImagen","registrarEvento","navigate","getPicture","destinationType","DestinationType","DATA_URL","sourceType","PictureSourceType","PHOTOLIBRARY","mediaType","MediaType","PICTURE","allowEdit","encodingType","EncodingType","JPEG","targetHeight","targetWidth","correctOrientation","saveToPhotoAlbum","then","resultado","err","console","log","CAMERA","selector","template"],"mappings":"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","file":"pages-registrar-evento-registrar-evento-module-es5.js","sourcesContent":["export default \"<ion-header class=\\\"ion-no-border\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-title>\\r\\n      Registrar Evento\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<body>\\r\\n  <ion-list class=\\\"register-content\\\">\\r\\n    <ion-item class=\\\"creador\\\">\\r\\n      <ion-label  type=\\\"text\\\" name=\\\"creador\\\">{{this.usuario}}</ion-label>\\r\\n    </ion-item>\\r\\n    <ion-item class=\\\"nombreEvento\\\">\\r\\n      <ion-input  [(ngModel)]=\\\"nombreEvento\\\"  type=\\\"text\\\" name=\\\"nombreEvento\\\" placeholder=\\\"*Nombre del evento\\\" autofocus required></ion-input>\\r\\n    </ion-item>\\r\\n  <ion-item class=\\\"ciudad\\\">\\r\\n    <ion-input type=\\\"text\\\" name=\\\"ciudad\\\" readonly>{{this.ciudad}}</ion-input>\\r\\n  </ion-item>\\r\\n  <ion-item class=\\\"direccion\\\">\\r\\n      <ion-input  [(ngModel)]=\\\"direccion\\\"  type=\\\"text\\\" name=\\\"direccion\\\" placeholder=\\\"*Dirección\\\" required></ion-input>\\r\\n    </ion-item>\\r\\n   <ion-item class=\\\"fecha\\\">\\r\\n    <ion-datetime [(ngModel)]=\\\"fecha\\\"  name=\\\"fecha\\\"  mmin=\\\"2021\\\" max=\\\"2023\\\" displayFormat=\\\"DD/MM/YYYY\\\" pikerFormat=\\\"DD MM YYYY\\\" placeholder=\\\"*Fecha\\\" required></ion-datetime>\\r\\n  </ion-item>\\r\\n  <ion-item class=\\\"hora\\\">\\r\\n    <ion-datetime [(ngModel)]=\\\"hora\\\"  name=\\\"hora\\\" displayFormat=\\\"HH:mm\\\" placeholder=\\\"*Hora\\\" required></ion-datetime>\\r\\n  </ion-item>\\r\\n  <div style=\\\"text-align: center;\\\">\\r\\n    <ion-button class=\\\"button-galeria\\\" style=\\\"margin-top: 10px;\\\"color=\\\"primary\\\" fill=\\\"outline\\\" slot=\\\"end\\\" (click)=\\\"abrirGaleria()\\\">\\r\\n        <ion-icon name=\\\"image-outline\\\"></ion-icon>\\r\\n        <ion-label style=\\\"margin-left: 10px;\\\">Galería</ion-label>\\r\\n    </ion-button>\\r\\n    <ion-button class=\\\"button-camara\\\" style=\\\"margin-top: 10px;\\\"color=\\\"primary\\\" fill=\\\"outline\\\" slot=\\\"end\\\" (click)=\\\"abrirCamara()\\\">\\r\\n        <ion-icon name=\\\"camera-outline\\\"></ion-icon>\\r\\n        <ion-label style=\\\"margin-left: 10px;\\\">Cámara</ion-label>\\r\\n    </ion-button>\\r\\n    </div>\\r\\n  </ion-list>\\r\\n  <div class=\\\"registration-event\\\">\\r\\n    <img src=\\\"../../../assets/createvent.jpg\\\">\\r\\n  </div>\\r\\n</body>\\r\\n\\r\\n<ion-footer class=\\\"bar-stable\\\">\\r\\n  <ion-toolbar color=\\\"light\\\">\\r\\n    <div style=\\\"text-align: center;\\\">\\r\\n  <ion-button (click)=\\\"guardar()\\\" class=\\\"save-button\\\" disabled=\\\"{{!this.nombreEvento || !this.direccion || !this.fecha || !this.hora}}\\\" color=\\\"secondary\\\" style=\\\"margin-left:0%\\\" >\\r\\n    <ion-icon name=\\\"save-outline\\\"></ion-icon>\\r\\n    <ion-label style=\\\"margin-left: 10px;\\\">Guardar</ion-label>\\r\\n  </ion-button>\\r\\n  <ion-button (click)=\\\"cancelar()\\\" class=\\\"cancel-button\\\" color=\\\"secondary\\\" style=\\\"margin-left:5%\\\" >\\r\\n    <ion-icon name=\\\"close\\\"></ion-icon>\\r\\n    <ion-label style=\\\"margin-left: 10px;\\\">Cancelar</ion-label>\\r\\n  </ion-button> \\r\\n</div>\\r\\n</ion-toolbar>\\r\\n</ion-footer>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { RegistrarEventoPage } from './registrar-evento.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RegistrarEventoPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RegistrarEventoPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { RegistrarEventoPageRoutingModule } from './registrar-evento-routing.module';\nimport { RegistrarEventoPage } from './registrar-evento.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RegistrarEventoPageRoutingModule\n  ],\n  declarations: [RegistrarEventoPage]\n})\nexport class RegistrarEventoPageModule {}\n","export default \"body {\\n  overflow-y: hidden;\\n  background-color: white;\\n}\\n\\n.register-content {\\n  margin-top: 72px;\\n  margin-left: 12px;\\n}\\n\\n.creador, .nombreEvento, .descripcion, .ciudad, .direccion, .fecha, .hora {\\n  border: 1px solid #3880ff;\\n  border-radius: 30px;\\n  height: 43px;\\n  width: 291px;\\n  font-size: 15px;\\n  margin-left: 30px;\\n  margin-bottom: 10px;\\n}\\n\\n.registration-event {\\n  width: 180px;\\n  margin-top: 20px;\\n  margin-left: 99px;\\n}\\n\\n.button-galeria, .button-camara {\\n  margin-right: 21px;\\n}\\n\\n.save-button, .cancel-button {\\n  width: 113px;\\n  height: 34px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcmVnaXN0cmFyLWV2ZW50by9yZWdpc3RyYXItZXZlbnRvLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGtCQUFBO0VBQ0EsdUJBQUE7QUFDSjs7QUFDQTtFQUNJLGdCQUFBO0VBQ0EsaUJBQUE7QUFFSjs7QUFBQTtFQUNJLHlCQUFBO0VBQ0EsbUJBQUE7RUFDQSxZQUFBO0VBQ0EsWUFBQTtFQUNBLGVBQUE7RUFDQSxpQkFBQTtFQUNBLG1CQUFBO0FBR0o7O0FBREE7RUFDSSxZQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQTtBQUlKOztBQUZBO0VBQ0ksa0JBQUE7QUFLSjs7QUFIQTtFQUNJLFlBQUE7RUFDQSxZQUFBO0FBTUoiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9yZWdpc3RyYXItZXZlbnRvL3JlZ2lzdHJhci1ldmVudG8ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiYm9keSB7XHJcbiAgICBvdmVyZmxvdy15OmhpZGRlbjtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG59XHJcbi5yZWdpc3Rlci1jb250ZW50IHtcclxuICAgIG1hcmdpbi10b3A6IDcycHg7XHJcbiAgICBtYXJnaW4tbGVmdDogMTJweDtcclxufVxyXG4uY3JlYWRvciwubm9tYnJlRXZlbnRvLCAuZGVzY3JpcGNpb24sIC5jaXVkYWQsIC5kaXJlY2Npb24sIC5mZWNoYSwgLmhvcmEge1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgIzM4ODBmZjtcclxuICAgIGJvcmRlci1yYWRpdXM6IDMwcHg7XHJcbiAgICBoZWlnaHQ6IDQzcHg7XHJcbiAgICB3aWR0aDogMjkxcHg7XHJcbiAgICBmb250LXNpemU6IDE1cHg7XHJcbiAgICBtYXJnaW4tbGVmdDogMzBweDtcclxuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XHJcbn1cclxuLnJlZ2lzdHJhdGlvbi1ldmVudCB7XHJcbiAgICB3aWR0aDogMTgwcHg7XHJcbiAgICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gICAgbWFyZ2luLWxlZnQ6IDk5cHg7XHJcbn1cclxuLmJ1dHRvbi1nYWxlcmlhLCAuYnV0dG9uLWNhbWFyYSB7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDIxcHg7XHJcbn1cclxuLnNhdmUtYnV0dG9uLCAuY2FuY2VsLWJ1dHRvbiB7XHJcbiAgICB3aWR0aDogMTEzcHg7XHJcbiAgICBoZWlnaHQ6IDM0cHg7XHJcbn1cclxuIl19 */\";","import { Component, OnInit } from '@angular/core';\r\nimport { Router} from '@angular/router';\r\nimport { EventoService } from '../../services/evento.service';\r\nimport { ActivatedRoute} from '@angular/router';\r\nimport { UsuarioService } from '../../services/usuario.service';\r\nimport { Camera } from '@ionic-native/camera/ngx';\r\n\r\n@Component({\r\n  selector: 'app-registrar-evento',\r\n  templateUrl: './registrar-evento.page.html',\r\n  styleUrls: ['./registrar-evento.page.scss'],\r\n})\r\nexport class RegistrarEventoPage implements OnInit {\r\n\r\n  constructor(\r\n    private _router: Router,\r\n    private _eventoService:EventoService,\r\n    private _usuarioService:UsuarioService,\r\n    private camera : Camera\r\n    ) { }\r\n  public usuario: string;\r\n  //Datos registro evento\r\n  public creador: string;\r\n  public nombreEvento: string;\r\n  public direccion: string;\r\n  public ciudad: string;\r\n  public fecha: Date;\r\n  public hora: Date;\r\n  public participantes: string[] = [];\r\n  mostrarImagen : string;\r\n\r\n  async ngOnInit() {\r\n    await this._usuarioService.compruebaSiLogado();\r\n    this.usuario = this._usuarioService.usuarioActual.nombre;\r\n    this.ciudad = this._usuarioService.usuarioActual.ciudad;\r\n  }\r\n\r\n  async guardar(){\r\n    const data = {\r\n     \r\n      nombreEvento: this.nombreEvento,\r\n      direccion : this.direccion,\r\n      ciudad : this.ciudad,\r\n      //creador: this.usuario, El creador NO se le pasa en la costante desde el front,en el back se coge del token.\r\n      fecha: this.fecha,\r\n      hora: this.hora,\r\n      participantes: this.participantes,\r\n      base64 : this.mostrarImagen\r\n    }\r\n    await this._eventoService.registrarEvento(data);\r\n\r\n    this._router.navigate(['/principal-libreria']);\r\n  }\r\n\r\n  cancelar(){\r\n    //Poner 'refresh' para que al guardar, el nuevo evento aparezca en la pagina principal del librero\r\n    this._router.navigate(['/principal-libreria']);//linea incompleta, da error con el 'refresh'\r\n  }\r\n\r\n  abrirGaleria(){\r\n    this.camera.getPicture({\r\n      destinationType: this.camera.DestinationType.DATA_URL,\r\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,\r\n      mediaType: this.camera.MediaType.PICTURE,\r\n      allowEdit: false,\r\n      encodingType: this.camera.EncodingType.JPEG,\r\n      targetHeight: 1024,\r\n      targetWidth: 1024,\r\n      correctOrientation: true,\r\n      saveToPhotoAlbum: true\r\n    }).then(resultado =>{\r\n      this.mostrarImagen = 'data:image/jpeg;base64,' + resultado;\r\n\r\n    }).catch(err =>{\r\n      console.log('Err', err);\r\n    })\r\n\r\n  }\r\n\r\n  abrirCamara(){\r\n    this.camera.getPicture({\r\n      destinationType: this.camera.DestinationType.DATA_URL,\r\n      sourceType: this.camera.PictureSourceType.CAMERA,\r\n      mediaType: this.camera.MediaType.PICTURE,\r\n      allowEdit: false,\r\n      encodingType: this.camera.EncodingType.JPEG,\r\n      targetHeight: 1024,\r\n      targetWidth: 1024,\r\n      correctOrientation: true,\r\n      saveToPhotoAlbum: true\r\n    }).then(resultado =>{\r\n      this.mostrarImagen = 'data:image/jpeg;base64,' + resultado;\r\n\r\n    }).catch(err =>{\r\n      console.log('Err', err);\r\n    })\r\n  }\r\n}\r\n"]}